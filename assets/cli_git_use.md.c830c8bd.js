import{_ as s,k as a,l as n,W as l}from"./chunks/framework.50c4d085.js";const A=JSON.parse('{"title":"使用","description":"Git使用记录","frontmatter":{"title":"使用","description":"Git使用记录","category":"git","tags":["Git"]},"headers":[],"relativePath":"cli/git/use.md","filePath":"cli/git/use.md","lastUpdated":1690265295000}'),e={name:"cli/git/use.md"},o=l(`<h1 id="git-使用" tabindex="-1">Git 使用 <a class="header-anchor" href="#git-使用" aria-label="Permalink to &quot;Git 使用&quot;">​</a></h1><h2 id="git-配置" tabindex="-1">Git 配置 <a class="header-anchor" href="#git-配置" aria-label="Permalink to &quot;Git 配置&quot;">​</a></h2><p>每一个级别的配置都会覆盖上层的相同配置，所以 <code>.git/config</code> 里的配置会覆盖 <code>/etc/gitconfig</code> 中的同名变量</p><table><thead><tr><th>命令</th><th>描述</th><th>对应读写文件</th></tr></thead><tbody><tr><td>git config --system</td><td>系统级配置，对所有用户都适用</td><td>/etc/gitconfig</td></tr><tr><td>git config --global</td><td>用户级配置，只适用于该用户</td><td>~/.gitconfig</td></tr><tr><td>git config</td><td>项目级配置，只适用于该项目</td><td>当前项目/.git/config</td></tr></tbody></table><h2 id="仓库克隆" tabindex="-1">仓库克隆 <a class="header-anchor" href="#仓库克隆" aria-label="Permalink to &quot;仓库克隆&quot;">​</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">clone</span><span style="color:#A6ACCD;"> [options] </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">repository</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[&lt;</span><span style="color:#A6ACCD;">directory</span><span style="color:#89DDFF;">&gt;]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 克隆某个 my-branch 到名为 my-project 的新目录中</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">clone</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--branch</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">my-branch</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://github.com/user/repo.git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">my-project</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><p><code>-v</code> 或 <code>--verbose</code>：输出详细的进度信息；</p></li><li><p><code>-q</code> 或 <code>--quiet</code>：减少输出信息的冗杂度；</p></li><li><p><code>--depth &lt;depth&gt;</code>：指定要克隆的历史记录的深度，即克隆最近的几个提交；</p></li><li><p><code>--branch &lt;branch&gt;</code>：指定要克隆的分支；</p></li><li><p><code>--single-branch</code>：仅克隆指定的分支，而不是所有分支；</p></li><li><p><code>--no-tags</code>：不克隆标签；</p></li><li><p><code>--recurse-submodules</code>：递归克隆子模块。</p></li></ul><h2 id="仓库同步" tabindex="-1">仓库同步 <a class="header-anchor" href="#仓库同步" aria-label="Permalink to &quot;仓库同步&quot;">​</a></h2><p>1、拉取所有分支</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">clone</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--mirror</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><code>git clone</code> 命令只会拉取 <code>master</code> 的最新信息。</li><li><code>--mirror</code> 会将所有分支内容都拉下来。</li></ul><p>2、将远端已经删除的分支在本地清理掉</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">remote</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">update</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--prune</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">origin</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>3、推送所有分支到目标仓库</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">push</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-f</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--prune</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--all</span><span style="color:#A6ACCD;"> [target_repository]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>4、同步 <code>tag</code></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tag</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--sort==-createordate</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">head</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-n2000</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">push</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-f</span><span style="color:#A6ACCD;"> [target_repository]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>三条命令同步仓库：</p><blockquote><p>需要有强制推送的权限；部分需要把分支保护关闭</p></blockquote><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">clone</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--bare</span><span style="color:#A6ACCD;"> [source_repository] </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">dir_name</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 源仓库</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> [dir_name]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">push</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--mirror</span><span style="color:#A6ACCD;"> [target_repository]  </span><span style="color:#676E95;font-style:italic;"># 目标仓库</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div>`,20),p=[o];function t(r,c,i,d,C,y){return a(),n("div",null,p)}const h=s(e,[["render",t]]);export{A as __pageData,h as default};
